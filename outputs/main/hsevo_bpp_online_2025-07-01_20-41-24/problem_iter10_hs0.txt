import numpy as np

def priority_v2(item: float,
                bins_remain_cap: np.ndarray,
                fill_ratio_weight: float = 139.9722026356355,
                almost_full_threshold: float = 0.9065749867509957,
                almost_full_bonus: float = 30.495458536972553) -> np.ndarray:
    """Combines waste minimization, fill ratio, and almost full bonus."""
    valid_bins = bins_remain_cap >= item
    if not np.any(valid_bins):
        return np.full_like(bins_remain_cap, -np.inf)

    waste = bins_remain_cap - item
    waste[waste < 0] = np.inf

    priority = -waste  # Minimize waste

    fill_ratio = (bins_remain_cap - waste) / bins_remain_cap
    fill_ratio[np.isinf(fill_ratio)] = 0
    priority += fill_ratio * fill_ratio_weight  # Maximize fill ratio

    almost_full = (bins_remain_cap - item) / bins_remain_cap > almost_full_threshold
    priority += almost_full * almost_full_bonus # Bonus for almost full bins

    priority[bins_remain_cap < item] = -np.inf
    return priority
