```python
import numpy as np

class PriorityV2:
    def __init__(self):
        self.total_calls = 0
        self.selection_counts = None
        self.total_rewards = None
        self.temperature = 1.0
        self.decay = 0.995
        self.w_base = 0.5
        self.w_diversity = 0.2
        self.w_ucb = 0.3
        self.c_ucb = 1.0

    def priority(self, item, bins_remain_cap):
        n = bins_remain_cap.shape[0]
        if self.selection_counts is None or self.selection_counts.shape[0] != n:
            self.selection_counts = np.zeros(n, dtype=float)
            self.total_rewards = np.zeros(n, dtype=float)
        feasible = bins_remain_cap >= item
        slack = np.where(feasible, bins_remain_cap - item, np.inf)
        base = np.where(feasible, 1.0 / (slack + 1.0), 0.0)
        median_leftover = np.median(slack[feasible]) if np.any(feasible) else 0.0
        diversity = np.where(feasible, 1.0 / (np.abs(slack - median_leftover) + 1.0), 0.0)
        avg_reward = np.where(self.selection_counts > 0, self.total_rewards / self.selection_counts, 0.0)
        ucb = avg_reward + self.c_ucb * np.sqrt(np.log(self.total_calls + 1) / (self.selection_counts + 1))
        combined = self.w_base * base + self.w_diversity * diversity + self.w_ucb * ucb
        combined = np.where(feasible, combined, -np.inf)
        noise = np.random.rand(n)
        combined = (1 - self.temperature) * combined + self.temperature * noise
        self.total_calls += 1
        self.temperature *= self.decay
        if np.any(feasible):
            chosen = np.argmax(combined)
            reward = - (bins_remain_cap[chosen] - item)
            self.selection_counts[chosen] += 1
            self.total_rewards[chosen] += reward
        return combined

_priority_v2_instance = PriorityV2()

def priority_v2(item: float, bins_remain_cap: np.ndarray) -> np.ndarray:
    return _priority_v2_instance.priority(item, bins_remain_cap)
```
